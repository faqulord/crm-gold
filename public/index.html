// index.js kiegészítés
const Message = mongoose.model('Message', new mongoose.Schema({
    sender: String,
    text: String,
    date: { type: Date, default: Date.now }
}));

// API a chathez
app.get('/api/messages', async (req, res) => {
    const msgs = await Message.find().sort({date: -1}).limit(20);
    res.json(msgs);
});

app.post('/api/messages', async (req, res) => {
    const msg = new Message(req.body);
    await msg.save();
    res.json(msg);
});